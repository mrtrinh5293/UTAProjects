if (self.CavalryLogger) { CavalryLogger.start_js(["M1SaY"]); }

__d("XVideoWithRapidFeedbackAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/video\/instream_video\/rapid_feedback\/async\/",{ad_type:{type:"Enum",required:true,enumType:1},video_id:{type:"String",required:true},ad_client_token:{type:"String"},elapsed_time_since_ad:{type:"Float"},ad_position_in_video:{type:"Float"}});}),null);
__d('VideoWithRapidFeedback',['AsyncRequest','DateConsts','VideoPlayerStates','ViewportTrackingHelper','XVideoWithRapidFeedbackAsyncController','onViewportChanged'],(function a(b,c,d,e,f,g){var h=10*c('DateConsts').MS_PER_SEC;function i(j,k){'use strict';this.$VideoWithRapidFeedback1=j;this.$VideoWithRapidFeedback2=k;this.$VideoWithRapidFeedback3=0;this.$VideoWithRapidFeedback4=0;if(j.isState(c('VideoPlayerStates').PLAYING))this.$VideoWithRapidFeedback6();j.addListener('beginPlayback',this.$VideoWithRapidFeedback6.bind(this));j.addListener('pausePlayback',this.$VideoWithRapidFeedback7.bind(this));this.$VideoWithRapidFeedback5=this.$VideoWithRapidFeedback8();c('onViewportChanged')(this.$VideoWithRapidFeedback9.bind(this));}i.prototype.$VideoWithRapidFeedback6=function(){'use strict';if(this.$VideoWithRapidFeedback3===0)this.$VideoWithRapidFeedback3=Date.now();};i.prototype.$VideoWithRapidFeedback7=function(){'use strict';if(this.$VideoWithRapidFeedback3>0)this.$VideoWithRapidFeedback4+=Date.now()-this.$VideoWithRapidFeedback3;this.$VideoWithRapidFeedback3=0;};i.prototype.$VideoWithRapidFeedback9=function(){'use strict';var j=this.$VideoWithRapidFeedback5;this.$VideoWithRapidFeedback5=this.$VideoWithRapidFeedback8();if(j&&!this.$VideoWithRapidFeedback5){var k=this.$VideoWithRapidFeedback4;if(this.$VideoWithRapidFeedback3>0)k+=Date.now()-this.$VideoWithRapidFeedback3;if(k>h){this.$VideoWithRapidFeedback4=0;this.$VideoWithRapidFeedback3=0;this.$VideoWithRapidFeedback10();}}};i.prototype.$VideoWithRapidFeedback8=function(){'use strict';return c('ViewportTrackingHelper').isVisible(this.$VideoWithRapidFeedback1.getRootNode(),0);};i.prototype.$VideoWithRapidFeedback10=function(){'use strict';var j=null,k=null,l=null,m=this.$VideoWithRapidFeedback1.getOption('VideoWithInstreamVideo','controller');if(m){var n=m.getMostRecentAdInfo();if(n&&n.adClientToken){j=n.adClientToken;k=Date.now()-n.adStartPlayingTimeMs;l=n.adPositionInVideoMs;}}var o=c('XVideoWithRapidFeedbackAsyncController').getURIBuilder().setEnum('ad_type',this.$VideoWithRapidFeedback2).setString('video_id',this.$VideoWithRapidFeedback1.getVideoID()).setString('ad_client_token',j).setFloat('elapsed_time_since_ad',k).setFloat('ad_position_in_video',l);new (c('AsyncRequest'))(o.getURI()).send();};f.exports=i;}),null);