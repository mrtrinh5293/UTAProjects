if (self.CavalryLogger) { CavalryLogger.start_js(["NKYg4"]); }

__d("TahoeMediaType",[],(function a(b,c,d,e,f,g){f.exports={VIDEO:"video"};}),null);
__d('Tahoe',[],(function a(b,c,d,e,f,g){var h=null,i={get:function j(){return h;},set:function j(k){h=k;}};f.exports=i;}),null);
__d('TahoeController',['cx','Bootloader','CSS','DialogX','DOM','PageTransitions','React','ReactDOM','ResizeListener','Style','Tahoe','TahoeBackAffordance.react','TahoeMediaType','URI','VideoAutoplayControllerX','VideoPermalinkURI','VideoPlayerLoggerSource','VideoPlayerReason','VideoProgressPreviewBar.react','ge','getElementPosition','getVendorPrefixedName'],(function a(b,c,d,e,f,g,h){var i=350,j=43,k=48,l=1000,m=l-i,n=560-j-k,o=10;function p(q,r,s){'use strict';this.$TahoeController27=function(){this.$TahoeController24();}.bind(this);this.$TahoeController13=q;this.$TahoeController5=[];this.$TahoeController2=c('URI').getRequestURI();this.$TahoeController14=this.$TahoeController18.bind(this);c('PageTransitions').registerHandler(this.$TahoeController14,o);c('PageTransitions').go(s);this.$TahoeController3=this.$TahoeController19();this.$TahoeController3.show();this.$TahoeController20();this.$TahoeController21();if(r){switch(this.$TahoeController13){case c('TahoeMediaType').VIDEO:this.$TahoeController16=r.video;this.$TahoeController7=this.$TahoeController16.getVideoID();}this.$TahoeController22();this.$TahoeController10=this.$TahoeController12;}else{this.$TahoeController23();this.$TahoeController7=c('VideoPermalinkURI').parse(s).video_id;}c('Bootloader').loadModules(["TahoeView"],function(t){this.$TahoeController17=t.loadView(this);}.bind(this),'TahoeController');}p.prototype.go=function(q){'use strict';c('PageTransitions').go(q);};p.prototype.onExit=function(){'use strict';c('PageTransitions').go(this.$TahoeController2);};p.prototype.$TahoeController19=function(){'use strict';var q={width:l};this.$TahoeController4=c('CSS').setClass(c('DOM').create('div'),"_5-g-");var r=new (c('DialogX'))(q,this.$TahoeController4);c('CSS').setClass(r.getRoot(),"_5-g_");c('CSS').addClass(document.body,"_1_-b");return r;};p.prototype.$TahoeController20=function(){'use strict';c('DOM').insertAfter(c('ge')('pagelet_dock'),this.$TahoeController3.getRoot());};p.prototype.$TahoeController21=function(){'use strict';c('ReactDOM').render(c('React').createElement(c('TahoeBackAffordance.react'),{entryURI:this.$TahoeController2,vpc:this.$TahoeController16}),this.$TahoeController4);};p.prototype.$TahoeController23=function(){'use strict';var q=c('CSS').setClass(c('DOM').create('div'),"_1c_u");this.$TahoeController12=q;var r=c('CSS').setClass(c('DOM').create('div'),"_5-yb _5_63");c('DOM').setContent(r,this.$TahoeController12);c('DOM').prependContent(this.$TahoeController4,r);this.$TahoeController24();};p.prototype.$TahoeController22=function(){'use strict';this.$TahoeController6=c('DOM').create('div');switch(this.$TahoeController13){case c('TahoeMediaType').VIDEO:this.$TahoeController12=this.$TahoeController16.getRootNode();this.$TahoeController11=this.$TahoeController16;}var q=c('getElementPosition')(this.$TahoeController12);this.$TahoeController8=this.$TahoeController12.clientWidth;this.$TahoeController9=this.$TahoeController12.clientHeight;c('DOM').insertAfter(this.$TahoeController12,this.$TahoeController6);this.$TahoeController15=true;var r=c('CSS').setClass(c('DOM').create('div'),"_5-yb _5_63");c('DOM').setContent(r,this.$TahoeController12);c('DOM').prependContent(this.$TahoeController4,r);this.$TahoeController25(r,q);};p.prototype.$TahoeController25=function(q,r){'use strict';this.$TahoeController26();var s=c('Style').getFloat(this.$TahoeController12,'width'),t=c('Style').getFloat(this.$TahoeController12,'height'),u='translate('+r.x+'px,'+r.y+'px)',v='scale('+r.width/s+', '+r.height/t+')';c('Style').set(q,c('getVendorPrefixedName')('transform'),u+' '+v);q.offsetWidth;c('Style').set(q,'transition','all .4s cubic-bezier(.12,.8,.32,1)');c('Style').set(q,c('getVendorPrefixedName')('transform'),'none');};p.prototype.$TahoeController26=function(){'use strict';this.$TahoeController1=parseFloat(this.$TahoeController12.getAttribute('data-original-aspect-ratio'));switch(this.$TahoeController13){case c('TahoeMediaType').VIDEO:this.$TahoeController16.updateSource(c('VideoPlayerLoggerSource').TAHOE);c('VideoAutoplayControllerX').setShouldAutoplay(false);this.$TahoeController16.unmute();this.$TahoeController16.play(c('VideoPlayerReason').USER);this.$TahoeController16.emit('TahoeController/enterTahoe');c('VideoProgressPreviewBar.react').destroyComponentIfAvailable(this.$TahoeController16);}this.$TahoeController24();this.$TahoeController5.push(c('ResizeListener').add(this.$TahoeController27));};p.prototype.addEvent=function(event){'use strict';this.$TahoeController5.push(event);};p.prototype.expandMoreVideos=function(){'use strict';this.$TahoeController17.expandMoreVideos();};p.prototype.getVideoController=function(){'use strict';return this.$TahoeController16;};p.prototype.selectAddComment=function(){'use strict';this.$TahoeController17.selectAddComment();};p.prototype.$TahoeController24=function(){'use strict';var q=window.innerWidth-i;q=Math.max(q,m);var r=window.innerHeight-j-k;r=Math.max(r,n);c('Style').set(this.$TahoeController12,'width',q+'px');c('Style').set(this.$TahoeController12,'height',r+'px');switch(this.$TahoeController13){case c('TahoeMediaType').VIDEO:if(this.$TahoeController16)this.$TahoeController16.setDimensions(q,r);}};p.prototype.$TahoeController18=function(q){'use strict';var r=c('URI').getRequestURI();if(q.getPath()===this.$TahoeController2.getPath()&&q.getQueryData().ref!=='tahoe'){this.$TahoeController28();}else if(!this.$TahoeController29(q)){this.$TahoeController28();return false;}else if((this.$TahoeController2.getPath()!=r.getPath()||r.getQueryData().ref==='tahoe')&&r.getPath()!=q.getPath())this.$TahoeController30(q);c('PageTransitions').transitionComplete();return true;};p.prototype.$TahoeController29=function(q){'use strict';return c('VideoPermalinkURI').isValid(q);};p.prototype.$TahoeController30=function(q){'use strict';this.$TahoeController16.pause();this.$TahoeController31();var r=c('VideoPermalinkURI').parse(q).video_id;this.$TahoeController17.updateView(r);};p.prototype.$TahoeController31=function(){'use strict';var q=this.$TahoeController12.clientHeight,r=c('CSS').setClass(c('DOM').create('div'),"_1c_u");c('Style').set(r,'height',q+'px');c('DOM').prependContent(this.$TahoeController4,r);if(this.$TahoeController15){c('DOM').insertAfter(this.$TahoeController6,this.$TahoeController10);c('DOM').remove(this.$TahoeController6);c('Style').set(this.$TahoeController10,'width','');c('Style').set(this.$TahoeController10,'height','');}else c('DOM').remove(this.$TahoeController4.children[1]);this.$TahoeController15=false;};p.prototype.$TahoeController28=function(){'use strict';this.$TahoeController17&&this.$TahoeController17.onExit();c('PageTransitions').removeHandler(this.$TahoeController14,o);this.$TahoeController5.forEach(function(q){return q.remove();});c('Style').set(this.$TahoeController12,'width','');c('Style').set(this.$TahoeController12,'height','');this.$TahoeController31();switch(this.$TahoeController13){case c('TahoeMediaType').VIDEO:c('VideoAutoplayControllerX').setShouldAutoplay(true);this.$TahoeController16&&this.$TahoeController16.emit('TahoeController/exitTahoe');if(this.$TahoeController11){this.$TahoeController11.setDimensions(this.$TahoeController8,this.$TahoeController9);this.$TahoeController11.updateSource(c('VideoPlayerLoggerSource').INLINE);this.$TahoeController11.pause(c('VideoPlayerReason').AUTOPLAY);this.$TahoeController11.mute();this.$TahoeController11.emit('resumeAutoplay');}}c('CSS').removeClass(document.body,"_1_-b");this.$TahoeController3.destroy();c('Tahoe').set(null);};p.prototype.getID=function(){'use strict';return this.$TahoeController7;};p.prototype.getContent=function(){'use strict';return this.$TahoeController4;};p.prototype.updateMedia=function(q){'use strict';this.$TahoeController16=q;this.$TahoeController12=this.$TahoeController16.getRootNode();this.$TahoeController7=this.$TahoeController16.getVideoID();this.$TahoeController26();this.$TahoeController17.setUpEndScreen();};p.openFromVideoPlayer=function(q,r){'use strict';c('Tahoe').set(new p(c('TahoeMediaType').VIDEO,{video:q},r));};p.openFromVideoLink=function(q){'use strict';c('Tahoe').set(new p(c('TahoeMediaType').VIDEO,null,q));};p.openFromPhoto=function(q){'use strict';};f.exports=p;}),null);